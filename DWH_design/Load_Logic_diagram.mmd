graph LR
    %% Data Sources
    OMS[Order Management System<br/>OMS]
    LMS[Logistic Management System<br/>LMS]

    %% Raw Files
    CSV1[source_system_1_oms_part_1.csv]
    CSV2[source_system_2_lms_part_2.csv]

    %% Staging Area
    SA_OMS[SA_OMS<br/>ext_oms → src_oms]
    SA_LMS[SA_LMS<br/>ext_lms → src_lms]

    %% 3NF Relational Layer
    BL_3NF[BL_3NF<br/>CE_CUSTOMERS<br/>CE_PRODUCTS_SCD<br/>CE_ORDERS<br/>CE_ORDER_LINES<br/>CE_SHIPMENTS<br/>CE_DELIVERIES<br/>Reference Tables]

    %% Dimensional Model
    BL_DM[BL_DM<br/>FCT_ORDER_LINE_SHIPMENTS_DD<br/>DIM_CUSTOMERS<br/>DIM_PRODUCTS_SCD<br/>DIM_TIME_DAY<br/>DIM_GEOGRAPHIES<br/>Reference Dimensions]

    %% Data Marts
    MART1[Sales Analysis<br/>Data Mart]
    MART2[Customer Analytics<br/>Data Mart]
    MART3[Supply Chain<br/>Data Mart]

    %% End User Tools
    BI[Business Intelligence<br/>Tools]
    REPORTS[Reporting<br/>Tools]
    ANALYTICS[Analytics<br/>Platforms]

    %% Data Flow
    OMS --> CSV1
    LMS --> CSV2

    CSV1 --> SA_OMS
    CSV2 --> SA_LMS

    SA_OMS --> BL_3NF
    SA_LMS --> BL_3NF

    BL_3NF --> BL_DM

    BL_DM --> MART1
    BL_DM --> MART2
    BL_DM --> MART3

    MART1 --> BI
    MART1 --> REPORTS
    MART2 --> ANALYTICS
    MART3 --> BI

    %% Direct access to dimensional model
    BL_DM -.-> BI
    BL_DM -.-> REPORTS
    BL_DM -.-> ANALYTICS

    %% Styling
    classDef source fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef file fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef staging fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef normalized fill:#fff8e1,stroke:#f57c00,stroke-width:2px
    classDef dimensional fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef mart fill:#f3e5f5,stroke:#8e24aa,stroke-width:2px
    classDef enduser fill:#fff3e0,stroke:#f57c00,stroke-width:2px

    class OMS,LMS source
    class CSV1,CSV2 file
    class SA_OMS,SA_LMS staging
    class BL_3NF normalized
    class BL_DM dimensional
    class MART1,MART2,MART3 mart
    class BI,REPORTS,ANALYTICS enduser

    %% Annotations
    subgraph "DATA SOURCES"
        OMS
        LMS
    end

    subgraph "STAGING AREA"
        SA_OMS
        SA_LMS
    end

    subgraph "3NF RELATIONAL"
        BL_3NF
    end

    subgraph "DIMENSIONAL MODEL"
        BL_DM
    end

    subgraph "DATA MARTS"
        MART1
        MART2
        MART3
    end

    subgraph "END-USER TOOLS"
        BI
        REPORTS
        ANALYTICS
    end
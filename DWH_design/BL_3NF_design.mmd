---
config:
  theme: redux-color
---
erDiagram
    CE_CUSTOMERS {
        BIGINT CUSTOMER_ID PK "NOT NULL,SEQUENCE"
        VARCHAR CUSTOMER_SRC_ID "NOT NULL"
        VARCHAR CUSTOMER_FIRST_NAME "NOT NULL"
        VARCHAR CUSTOMER_LAST_NAME "NOT NULL"
        VARCHAR CUSTOMER_GENDER "NOT NULL"
        INT CUSTOMER_YEAR_OF_BIRTH "NOT NULL"
        VARCHAR CUSTOMER_EMAIL "NOT NULL"
        VARCHAR CUSTOMER_SEGMENT "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_PRODUCTS_SCD {
        BIGINT PRODUCT_ID PK "NOT NULL,SEQUENCE"
        DATE START_DT PK "NOT NULL, DEFAULT '1990-01-01'"
        VARCHAR PRODUCT_SRC_ID "NOT NULL"
        VARCHAR PRODUCT_NAME "NOT NULL"
        BIGINT BRAND_ID FK "NOT NULL"
        BIGINT PRIMARY_CATEGORY_ID FK "NOT NULL"
        BIGINT STATUS_ID FK "NOT NULL"
        DATE END_DT "NOT NULL, DEFAULT '9999-12-31'"
        VARCHAR IS_ACTIVE "NOT NULL, DEFAULT 'Y'"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_DEPARTMENTS {
        BIGINT DEPARTMENT_ID PK "NOT NULL, SEQUENCE"
        VARCHAR DEPARTMENT_SRC_ID "NOT NULL"
        VARCHAR DEPARTMENT_NAME "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_BRANDS {
        BIGINT BRAND_ID PK "NOT NULL, SEQUENCE"
        VARCHAR BRAND_SRC_ID "NOT NULL"
        VARCHAR BRAND_NAME "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_BRAND_CATEGORIES {
        BIGINT BRAND_CATEGORY_ID PK "NOT NULL, SEQUENCE"
        BIGINT BRAND_ID FK "NOT NULL"
        BIGINT CATEGORY_ID FK "NOT NULL"
        INT RELATIONSHIP_STRENGTH "NULL, DEFAULT 3"
        INT PRODUCT_COUNT "NULL, DEFAULT 0"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_PRODUCT_CATEGORIES {
        BIGINT PRODUCT_CATEGORY_ID PK "NOT NULL, SEQUENCE"
        BIGINT PRODUCT_ID FK "NOT NULL"
        BIGINT CATEGORY_ID FK "NOT NULL"
        CHAR IS_PRIMARY "NOT NULL, DEFAULT 'N'"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_PRODUCT_STATUSES {
        BIGINT STATUS_ID PK "NOT NULL, SEQUENCE"
        VARCHAR STATUS_SRC_ID "NOT NULL"
        VARCHAR STATUS_NAME "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_CATEGORIES {
        BIGINT CATEGORY_ID PK "NOT NULL, SEQUENCE"
        VARCHAR CATEGORY_SRC_ID "NOT NULL"
        VARCHAR CATEGORY_NAME "NOT NULL"
        VARCHAR CATEGORY_CODE "NULL"
        BIGINT DEPARTMENT_ID FK "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_SALES_REPRESENTATIVES {
        BIGINT SALES_REP_ID PK "NOT NULL, SEQUENCE"
        VARCHAR SALES_REP_SRC_ID "NOT NULL"
        VARCHAR SALES_REP_NAME "NOT NULL"
        BIGINT GEOGRAPHY_ID FK "NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_GEOGRAPHIES {
        BIGINT GEOGRAPHY_ID PK "NOT NULL, SEQUENCE"
        VARCHAR GEOGRAPHY_SRC_ID "NOT NULL"
        BIGINT CITY_ID FK "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_REGIONS {
        BIGINT REGION_ID PK "NOT NULL, SEQUENCE"
        VARCHAR REGION_SRC_ID "NOT NULL"
        VARCHAR REGION_NAME "NOT NULL"
        VARCHAR REGION_CODE "NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_COUNTRIES {
        BIGINT COUNTRY_ID PK "NOT NULL, SEQUENCE"
        VARCHAR COUNTRY_SRC_ID "NOT NULL"
        VARCHAR COUNTRY_NAME "NOT NULL"
        VARCHAR COUNTRY_CODE "NULL"
        BIGINT REGION_ID FK "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_STATES {
        BIGINT STATE_ID PK "NOT NULL, SEQUENCE"
        VARCHAR STATE_SRC_ID "NOT NULL"
        VARCHAR STATE_NAME "NOT NULL"
        VARCHAR STATE_CODE "NULL"
        BIGINT COUNTRY_ID FK "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_CITIES {
        BIGINT CITY_ID PK "NOT NULL, SEQUENCE"
        VARCHAR CITY_SRC_ID "NOT NULL"
        VARCHAR CITY_NAME "NOT NULL"
        VARCHAR CITY_CODE "NULL"
        BIGINT STATE_ID FK "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_WAREHOUSES {
        BIGINT WAREHOUSE_ID PK "NOT NULL, SEQUENCE"
        VARCHAR WAREHOUSE_SRC_ID "NOT NULL"
        VARCHAR WAREHOUSE_NAME "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_CARRIERS {
        BIGINT CARRIER_ID PK "NOT NULL, SEQUENCE"
        VARCHAR CARRIER_SRC_ID "NOT NULL"
        VARCHAR CARRIER_NAME "NOT NULL"
        VARCHAR CARRIER_TYPE "NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_ORDER_STATUSES {
        BIGINT ORDER_STATUS_ID PK "NOT NULL, SEQUENCE"
        VARCHAR ORDER_STATUS_SRC_ID "NOT NULL"
        VARCHAR ORDER_STATUS "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_PAYMENT_METHODS {
        BIGINT PAYMENT_METHOD_ID PK "NOT NULL, SEQUENCE"
        VARCHAR PAYMENT_METHOD_SRC_ID "NOT NULL"
        VARCHAR PAYMENT_METHOD "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_SHIPPING_MODES {
        BIGINT SHIPPING_MODE_ID PK "NOT NULL, SEQUENCE"
        VARCHAR SHIPPING_MODE_SRC_ID "NOT NULL"
        VARCHAR SHIPPING_MODE "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_DELIVERY_STATUSES {
        BIGINT DELIVERY_STATUS_ID PK "NOT NULL, SEQUENCE"
        VARCHAR DELIVERY_STATUS_SRC_ID "NOT NULL"
        VARCHAR DELIVERY_STATUS "NOT NULL"
        VARCHAR SOURCE_SYSTEM "NOT NULL"
        VARCHAR SOURCE_ENTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_ORDERS {
        BIGINT ORDER_ID PK "NOT NULL, SEQUENCE"
        BIGINT CUSTOMER_ID FK "NOT NULL"
        BIGINT SALES_REP_ID FK "NOT NULL"
        BIGINT ORDER_STATUS_ID FK "NOT NULL"
        BIGINT PAYMENT_METHOD_ID FK "NOT NULL"
        DATE ORDER_DATE "NOT NULL"
        DECIMAL ORDER_TOTAL "NULL"
        DATE EVENT_DT "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_ORDER_LINES {
        BIGINT ORDER_LINE_ID PK "NOT NULL, SEQUENCE"
        BIGINT ORDER_ID FK "NOT NULL"
        BIGINT PRODUCT_ID FK "NOT NULL"
        INTEGER QUANTITY "NOT NULL"
        DECIMAL UNIT_PRICE "NOT NULL"
        DECIMAL UNIT_COST "NULL"
        DECIMAL LINE_TOTAL "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_SHIPMENTS {
        BIGINT SHIPMENT_ID PK "NOT NULL, SEQUENCE"
        BIGINT ORDER_ID FK "NOT NULL"
        BIGINT GEOGRAPHY_ID FK "NOT NULL"
        BIGINT SHIPPING_MODE_ID FK "NOT NULL"
        BIGINT WAREHOUSE_ID FK "NOT NULL"
        BIGINT CARRIER_ID FK "NOT NULL"
        DATE SHIP_DATE "NOT NULL"
        DECIMAL SHIPPING_COST "NULL"
        DATE EVENT_DT "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_SHIPMENT_LINES {
        BIGINT SHIPMENT_LINE_ID PK "NOT NULL, SEQUENCE"
        BIGINT SHIPMENT_ID FK "NOT NULL"
        BIGINT ORDER_LINE_ID FK "NOT NULL"
        INTEGER SHIPPED_QUANTITY "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_DELIVERIES {
        BIGINT DELIVERY_ID PK "NOT NULL, SEQUENCE"
        BIGINT SHIPMENT_ID FK "NOT NULL"
        BIGINT DELIVERY_STATUS_ID FK "NOT NULL"
        DATE DELIVERY_DATE "NULL"
        INTEGER DELIVERY_DAYS "NULL"
        BOOLEAN ON_TIME_DELIVERY "NULL"
        DATE EVENT_DT "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

    CE_TRANSACTIONS {
        BIGINT TRANSACTION_ID PK "NOT NULL, SEQUENCE"
        BIGINT ORDER_ID FK "NOT NULL"
        DECIMAL SALES_AMOUNT "NOT NULL"
        DATE TRANSACTION_DATE "NOT NULL"
        DATE EVENT_DT "NOT NULL"
        TIMESTAMP TA_INSERT_DT "NOT NULL"
        TIMESTAMP TA_UPDATE_DT "NOT NULL"
    }

%% ========================================
%% BUSINESS PROCESS RELATIONSHIPS
%% ========================================

%% CUSTOMER MANAGEMENT PROCESS
    CE_CUSTOMERS ||--o{ CE_ORDERS: "Customer places orders"
%% PRODUCT CATALOG MANAGEMENT PROCESS
    CE_DEPARTMENTS ||--o{ CE_CATEGORIES: "Department organizes product categories"
    CE_BRANDS ||--o{ CE_PRODUCTS_SCD: "Brand manufactures products"
    CE_CATEGORIES ||--o{ CE_PRODUCTS_SCD: "Primary category classifies product"
    CE_PRODUCT_STATUSES ||--o{ CE_PRODUCTS_SCD: "Status defines product availability"

%% MANY-TO-MANY RELATIONSHIPS
    CE_BRANDS ||--o{ CE_BRAND_CATEGORIES: "Brand operates in categories"
    CE_BRAND_CATEGORIES }o--|| CE_CATEGORIES: "Category contains brands"
    CE_PRODUCT_CATEGORIES }o--|| CE_PRODUCTS_SCD: "Product belongs to categories"
    CE_PRODUCT_CATEGORIES }o--|| CE_CATEGORIES: "Category contains products"

%% SALES PROCESS
    CE_PRODUCTS_SCD ||--o{ CE_ORDER_LINES: "Product is sold on order lines"
    CE_SALES_REPRESENTATIVES ||--o{ CE_ORDERS: "Sales rep manages customer orders"
    CE_ORDER_STATUSES ||--o{ CE_ORDERS: "Status tracks order lifecycle"
    CE_PAYMENT_METHODS ||--o{ CE_ORDERS: "Payment method processes order payment"
    CE_ORDERS ||--o{ CE_ORDER_LINES: "Order contains multiple product lines"
%% FULFILLMENT PROCESS
    CE_ORDERS ||--o{ CE_SHIPMENTS: "Order generates shipment for fulfillment"
    CE_ORDER_LINES ||--o{ CE_SHIPMENT_LINES: "Order line items are shipped in shipment lines"
    CE_SHIPMENTS ||--o{ CE_SHIPMENT_LINES: "Shipment contains multiple order line items"
%% LOGISTICS PROCESS
    CE_SHIPPING_MODES ||--o{ CE_SHIPMENTS: "Shipping mode defines delivery method"
    CE_WAREHOUSES ||--o{ CE_SHIPMENTS: "Warehouse originates shipment"
    CE_CARRIERS ||--o{ CE_SHIPMENTS: "Carrier transports shipment"
    CE_GEOGRAPHIES ||--o{ CE_SHIPMENTS: "Geography defines shipment destination"
%% DELIVERY TRACKING PROCESS
    CE_SHIPMENTS ||--o{ CE_DELIVERIES: "Shipment results in delivery"
    CE_DELIVERY_STATUSES ||--o{ CE_DELIVERIES: "Status tracks delivery completion"
%% FINANCIAL PROCESS
    CE_ORDERS ||--o{ CE_TRANSACTIONS: "Order generates financial transaction"
%% TERRITORY MANAGEMENT PROCESS
    CE_GEOGRAPHIES ||--o{ CE_SALES_REPRESENTATIVES: "Geography defines sales rep territory"

%% GEOGRAPHIC HIERARCHY PROCESS
    CE_REGIONS ||--o{ CE_COUNTRIES: "Region contains countries"
    CE_COUNTRIES ||--o{ CE_STATES: "Country contains states/provinces"
    CE_STATES ||--o{ CE_CITIES: "State contains cities"
    CE_CITIES ||--o{ CE_GEOGRAPHIES: "City defines geographic location"